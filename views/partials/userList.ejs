<% if (users && users.length > 0) { %>
<ul class="user-list">
  <% users.forEach(user => { %>
  <li>
    <article class="card" style="margin-bottom: 1rem">
      <header>
        <p>
          <strong
            ><%= user.firstName %>
            <%= user.lastName %></strong
          >
        </p>
        <span style="float: right">ID: <%= user.id %></span>
      </header>
      <p>
        <strong>Email:</strong>
        <%= user.email %>
      </p>
      <% if (user.age) { %>
      <p>
        <strong>Age:</strong>
        <%= user.age %>
      </p>
      <% } %>
      <% if (user.bio) { %>
      <p>
        <strong>Bio:</strong>
        <%= user.bio %>
      </p>
      <% } %>

      <footer>
        <% if (!user.protected) { %>
        <a role="button" class="secondary" href="/<%= user.id %>/update"
          >✏️ Update</a
        >
        <form action="/<%= user.id %>/delete" method="POST">
          <button
            class="contrast"
            type="submit"
            onclick="return confirm('Are you sure you want to delete this user?');"
          >
            🗑️ Delete
          </button>
        </form>
        <% } else {%>
        <article>Protected</article>

        <% } %>
      </footer>
    </article>
  </li>
  <% }); %>
</ul>
<% } else { %>
<p>No users found. Be the first to <a href="/create">create a user</a>.</p>
<% } %>
